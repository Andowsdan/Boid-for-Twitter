package com.handlerexploit.prime;

import android.content.Context;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.StateListDrawable;

/**
 * This is a very expensive way to create a StateListDrawable from a remote
 * image set. <b>I do not recommend this ever</b>. Although, if you have to do
 * it then this is going to be the best way to do it.</br></br> The basic api
 * for adding a remote image is
 * {@link RemoteStateListDrawable#addRemoteState(int[], String)}.
 * <br/><br/>
 * See https://github.com/DHuckaby/Prime
 * @author Daniel Huckaby
 */
public class RemoteStateListDrawable extends StateListDrawable {

    private ImageManager mImageManager;
    private Context mContext;

    public RemoteStateListDrawable(Context context) {
        mImageManager = ImageManager.getInstance(context);
        mContext = context;
    }

    /**
     * Add a new image/string ID to the set of images.
     * 
     * </br></br>Make sure to call this off the UI Thread, because it is
     * synchronously receiving the image.
     * 
     * @param stateSet
     *            An array of resource Ids to associate with the image. Switch
     *            to this image by calling setState().
     * @param source
     *            The URL of a remote image
     */
    public void addRemoteState(int[] stateSet, String source) {
        addState(stateSet, new BitmapDrawable(mContext.getResources(), mImageManager.get(source)));
    }
}